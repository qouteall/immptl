<!DOCTYPE html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.48" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://qouteall.fun/immptl/wiki/Old-API.html"><meta property="og:site_name" content="Immersive Portals"><meta property="og:title" content="API for Other Mods (old version)"><meta property="og:type" content="article"><meta property="og:updated_time" content="2023-12-30T09:33:58.000Z"><meta property="og:locale" content="en-US"><meta property="og:locale:alternate" content="zh-CN"><meta property="article:modified_time" content="2023-12-30T09:33:58.000Z"><link rel="icon" href="/immptl/images/immptl.png"><title>API for Other Mods (old version) | Immersive Portals</title><meta name="description" content="See through portals and teleport seamlessly.">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/immptl/assets/style.5f4cd812.css">
    <link rel="modulepreload" href="/immptl/assets/app.0c870a62.js"><link rel="modulepreload" href="/immptl/assets/Old-API.html.a4a7dbfc.js"><link rel="modulepreload" href="/immptl/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/immptl/assets/Old-API.html.c83782db.js"><link rel="prefetch" href="/immptl/assets/Download.html.a86b315a.js"><link rel="prefetch" href="/immptl/assets/index.html.ab0e8abe.js"><link rel="prefetch" href="/immptl/assets/Download.html.32678c76.js"><link rel="prefetch" href="/immptl/assets/index.html.ea88bbc8.js"><link rel="prefetch" href="/immptl/assets/API-for-Other-Mods.html.fa6254b2.js"><link rel="prefetch" href="/immptl/assets/Commands-Reference.html.5ace7ea5.js"><link rel="prefetch" href="/immptl/assets/Config-Options.html.c8f4d025.js"><link rel="prefetch" href="/immptl/assets/Datapack-Based-Custom-Portal-Generation.html.db465aef.js"><link rel="prefetch" href="/immptl/assets/Dimension-Management.html.a4dd5658.js"><link rel="prefetch" href="/immptl/assets/Dimension-Stack.html.222115d2.js"><link rel="prefetch" href="/immptl/assets/Implementation-Details.html.b32b7f59.js"><link rel="prefetch" href="/immptl/assets/MiniScaled.html.73ece166.js"><link rel="prefetch" href="/immptl/assets/Miscellaneous.html.7e536c37.js"><link rel="prefetch" href="/immptl/assets/Portal-Animation.html.dcd2a382.js"><link rel="prefetch" href="/immptl/assets/Portal-Attributes.html.ca4125e4.js"><link rel="prefetch" href="/immptl/assets/Portal-Customization.html.951552b6.js"><link rel="prefetch" href="/immptl/assets/Portal-Gun.html.b2140c23.js"><link rel="prefetch" href="/immptl/assets/Portals.html.8849c3a4.js"><link rel="prefetch" href="/immptl/assets/index.html.6fedc59d.js"><link rel="prefetch" href="/immptl/assets/Spatial-Transformation.html.02306410.js"><link rel="prefetch" href="/immptl/assets/API-for-Other-Mods.html.ad383eaa.js"><link rel="prefetch" href="/immptl/assets/Commands-Reference.html.7bf2e6a1.js"><link rel="prefetch" href="/immptl/assets/Config-Options.html.f58dada5.js"><link rel="prefetch" href="/immptl/assets/Datapack-Based-Custom-Portal-Generation.html.7cd083dd.js"><link rel="prefetch" href="/immptl/assets/Dimension-Management.html.801d6601.js"><link rel="prefetch" href="/immptl/assets/Dimension-Stack.html.f21880e9.js"><link rel="prefetch" href="/immptl/assets/Implementation-Details.html.45b2819b.js"><link rel="prefetch" href="/immptl/assets/MiniScaled.html.4d966aeb.js"><link rel="prefetch" href="/immptl/assets/Miscellaneous.html.1edbeb5f.js"><link rel="prefetch" href="/immptl/assets/Portal-Attributes.html.144f86e4.js"><link rel="prefetch" href="/immptl/assets/Portal-Customization.html.ec3af4a2.js"><link rel="prefetch" href="/immptl/assets/Portals.html.0a50a0a6.js"><link rel="prefetch" href="/immptl/assets/index.html.b253b4d3.js"><link rel="prefetch" href="/immptl/assets/Spatial-Transformation.html.0fda61d0.js"><link rel="prefetch" href="/immptl/assets/404.html.43d8668c.js"><link rel="prefetch" href="/immptl/assets/Download.html.7469908d.js"><link rel="prefetch" href="/immptl/assets/index.html.8c6e3fdb.js"><link rel="prefetch" href="/immptl/assets/Download.html.9637cfa3.js"><link rel="prefetch" href="/immptl/assets/index.html.45c4820f.js"><link rel="prefetch" href="/immptl/assets/API-for-Other-Mods.html.84d1b3ad.js"><link rel="prefetch" href="/immptl/assets/Commands-Reference.html.98dfed52.js"><link rel="prefetch" href="/immptl/assets/Config-Options.html.d04b8bd0.js"><link rel="prefetch" href="/immptl/assets/Datapack-Based-Custom-Portal-Generation.html.23b6a036.js"><link rel="prefetch" href="/immptl/assets/Dimension-Management.html.993925a5.js"><link rel="prefetch" href="/immptl/assets/Dimension-Stack.html.e0fe23f9.js"><link rel="prefetch" href="/immptl/assets/Implementation-Details.html.31612f10.js"><link rel="prefetch" href="/immptl/assets/MiniScaled.html.6fa9edde.js"><link rel="prefetch" href="/immptl/assets/Miscellaneous.html.8b3ff730.js"><link rel="prefetch" href="/immptl/assets/Portal-Animation.html.a9f2f8ae.js"><link rel="prefetch" href="/immptl/assets/Portal-Attributes.html.45418be2.js"><link rel="prefetch" href="/immptl/assets/Portal-Customization.html.4b1a0e9d.js"><link rel="prefetch" href="/immptl/assets/Portal-Gun.html.a8763b78.js"><link rel="prefetch" href="/immptl/assets/Portals.html.99f90689.js"><link rel="prefetch" href="/immptl/assets/index.html.dc34f721.js"><link rel="prefetch" href="/immptl/assets/Spatial-Transformation.html.08cf20ed.js"><link rel="prefetch" href="/immptl/assets/API-for-Other-Mods.html.97a35387.js"><link rel="prefetch" href="/immptl/assets/Commands-Reference.html.4c2d4d5e.js"><link rel="prefetch" href="/immptl/assets/Config-Options.html.e6cfc032.js"><link rel="prefetch" href="/immptl/assets/Datapack-Based-Custom-Portal-Generation.html.6a0903d7.js"><link rel="prefetch" href="/immptl/assets/Dimension-Management.html.36a2477e.js"><link rel="prefetch" href="/immptl/assets/Dimension-Stack.html.608b535e.js"><link rel="prefetch" href="/immptl/assets/Implementation-Details.html.bb3cad8f.js"><link rel="prefetch" href="/immptl/assets/MiniScaled.html.2c087ee0.js"><link rel="prefetch" href="/immptl/assets/Miscellaneous.html.77351173.js"><link rel="prefetch" href="/immptl/assets/Portal-Attributes.html.31b989b8.js"><link rel="prefetch" href="/immptl/assets/Portal-Customization.html.6520bf9e.js"><link rel="prefetch" href="/immptl/assets/Portals.html.180109fb.js"><link rel="prefetch" href="/immptl/assets/index.html.49712fbb.js"><link rel="prefetch" href="/immptl/assets/Spatial-Transformation.html.0971bd81.js"><link rel="prefetch" href="/immptl/assets/404.html.314a0e94.js"><link rel="prefetch" href="/immptl/assets/404.7ce4edf3.js"><link rel="prefetch" href="/immptl/assets/Layout.441f72e9.js"><link rel="prefetch" href="/immptl/assets/photoswipe.esm.185f7ee8.js"><link rel="prefetch" href="/immptl/assets/CollapseTransition.fd9fbcde.js"><link rel="prefetch" href="/immptl/assets/ModDownload.520d6bcb.js"><link rel="prefetch" href="/immptl/assets/SimpleAccordion.ff8c67c5.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/immptl/" class="brand"><img class="logo" src="/immptl/images/immptl.png" alt="Immersive Portals"><!----><span class="site-name hide-in-pad">Immersive Portals</span></a><!----></div><div class="navbar-center"><!----><!----><!----></div><div class="navbar-right"><!----><div class="nav-item"><div class="dropdown-wrapper i18n-dropdown"><button class="dropdown-title" type="button" aria-label="Select language"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon i18n-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="i18n icon" style="width:1rem;height:1rem;vertical-align:middle;"><path d="M379.392 460.8 494.08 575.488l-42.496 102.4L307.2 532.48 138.24 701.44l-71.68-72.704L234.496 460.8l-45.056-45.056c-27.136-27.136-51.2-66.56-66.56-108.544h112.64c7.68 14.336 16.896 27.136 26.112 35.84l45.568 46.08 45.056-45.056C382.976 312.32 409.6 247.808 409.6 204.8H0V102.4h256V0h102.4v102.4h256v102.4H512c0 70.144-37.888 161.28-87.04 210.944L378.88 460.8zM576 870.4 512 1024H409.6l256-614.4H768l256 614.4H921.6l-64-153.6H576zM618.496 768h196.608L716.8 532.48 618.496 768z"></path></svg><!--]--><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-current="page" href="/immptl/wiki/Old-API.html" class="router-link-active router-link-exact-active nav-link active" aria-label="English"><!---->English<!----></a></li><li class="dropdown-item"><a href="/immptl/zh/" class="nav-link" aria-label="简体中文"><!---->简体中文<!----></a></li></ul></button></div></div><!----><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><div id="docsearch-container"></div><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/immptl/wiki/" class="nav-link sidebar-link sidebar-page" aria-label="Home"><!---->Home<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/immptl/wiki/Portals.html" class="nav-link sidebar-link sidebar-page" aria-label="Portals"><!---->Portals<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/immptl/wiki/Portal-Customization.html" class="nav-link sidebar-link sidebar-page" aria-label="Portal Customization"><!---->Portal Customization<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/immptl/wiki/Spatial-Transformation.html" class="nav-link sidebar-link sidebar-page" aria-label="Spatial Transformation"><!---->Spatial Transformation<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/immptl/wiki/Datapack-Based-Custom-Portal-Generation.html" class="nav-link sidebar-link sidebar-page" aria-label="Datapack-Based Custom Portal Generation"><!---->Datapack-Based Custom Portal Generation<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/immptl/wiki/Dimension-Management.html" class="nav-link sidebar-link sidebar-page" aria-label="Dimension Management"><!---->Dimension Management<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/immptl/wiki/Dimension-Stack.html" class="nav-link sidebar-link sidebar-page" aria-label="Dimension Stack"><!---->Dimension Stack<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/immptl/wiki/Config-Options.html" class="nav-link sidebar-link sidebar-page" aria-label="Config Options"><!---->Config Options<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/immptl/wiki/Commands-Reference.html" class="nav-link sidebar-link sidebar-page" aria-label="Commands Reference"><!---->Commands Reference<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/immptl/wiki/Portal-Attributes.html" class="nav-link sidebar-link sidebar-page" aria-label="Portal Attributes"><!---->Portal Attributes<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/immptl/wiki/Portal-Animation.html" class="nav-link sidebar-link sidebar-page" aria-label="Portal Animation"><!---->Portal Animation<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/immptl/wiki/MiniScaled.html" class="nav-link sidebar-link sidebar-page" aria-label="MiniScaled"><!---->MiniScaled<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/immptl/wiki/Portal-Gun.html" class="nav-link sidebar-link sidebar-page" aria-label="Portal Gun"><!---->Portal Gun<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/immptl/wiki/Miscellaneous.html" class="nav-link sidebar-link sidebar-page" aria-label="Miscellaneous"><!---->Miscellaneous<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/immptl/wiki/API-for-Other-Mods.html" class="nav-link sidebar-link sidebar-page" aria-label="API for Other Mods"><!---->API for Other Mods<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->API for Other Mods (old version)</h1><!----><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">On This Page</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/immptl/wiki/Old-API.html#dimension-api-in-mc-1-20-2" class="router-link-active router-link-exact-active toc-link level3">Dimension API in MC 1.20.2</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/immptl/wiki/Old-API.html#dimension-api-in-mc-1-20-1" class="router-link-active router-link-exact-active toc-link level3">Dimension API in MC 1.20.1</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/immptl/wiki/Old-API.html#dimension-api-in-1-18-2-and-1-19-2" class="router-link-active router-link-exact-active toc-link level3">Dimension API In 1.18.2 and 1.19.2:</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/immptl/wiki/Old-API.html#dimension-api-in-1-17-1-and-1-18-1" class="router-link-active router-link-exact-active toc-link level3">Dimension API In 1.17.1 and 1.18.1:</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="api-for-other-mods-old-version" tabindex="-1"><a class="header-anchor" href="#api-for-other-mods-old-version" aria-hidden="true">#</a> API for Other Mods (old version)</h1><p>These are the documentation for the APIs in older versions. Supporting old versions is in low priority. It&#39;s recommended to use the latest version of iPortal and q_misc_util.</p><p>Code is in yarn mapping.</p><p>The content in this page is outdated.</p><h3 id="dimension-api-in-mc-1-20-2" tabindex="-1"><a class="header-anchor" href="#dimension-api-in-mc-1-20-2" aria-hidden="true">#</a> Dimension API in MC 1.20.2</h3><p>The dimension API in 1.20.2 is in <code>q_misc_util</code>. It&#39;s roughly the same as the dimension API in DimLib.</p><h3 id="dimension-api-in-mc-1-20-1" tabindex="-1"><a class="header-anchor" href="#dimension-api-in-mc-1-20-1" aria-hidden="true">#</a> Dimension API in MC 1.20.1</h3><h4 id="basic-concepts-of-dimensions" tabindex="-1"><a class="header-anchor" href="#basic-concepts-of-dimensions" aria-hidden="true">#</a> Basic Concepts of Dimensions</h4><p>Minecraft allows defining dimension types, biomes and other things via datapacks. Fabric will turn mod files in <code>resources</code> into virtual datapacks.</p><p>You can get a <code>DynamicRegistryManager</code> from a server, then you can get the dimension type registry from the registry manager, and then you can get the dimension type from the dimension type registry.</p><p>A dimension consists of:</p><ul><li>A dimension id (Its type is <code>RegistryKey&lt;World&gt;</code>. An <code>Identifier</code> can be converted to <code>RegistryKey&lt;World&gt;</code>)</li><li>A dimension type. It defines the world height, skylight and other properties. (You can define your dimension types in json files. Then you can get it from the <code>DynamicRegistryManager</code>)</li><li>A chunk generator. It does world generation of that dimension. To create the chunk generator, you probably need to access the registries to get the biomes and other things via <code>DynamicRegistryManager</code>.</li></ul><p>A <code>DimensionOptions</code> contains a dimension type <code>RegistryEntry</code> and a chunk generator.</p><p>In Mojang mapping, <code>DynamicRegistryManager</code> is <code>RegistryAccess</code>, <code>RegistryKey</code> is <code>ResourceKey</code>, <code>DimensionOptions</code> is <code>WorldStem</code>, <code>GeneratorOptions</code> is <code>WorldGenSettings</code>, <code>RegistryEntry</code> is <code>Holder</code>, <code>Identifier</code> is <code>ResourceLocation</code>.</p><h4 id="dynamically-adding-and-removing-dimensions" tabindex="-1"><a class="header-anchor" href="#dynamically-adding-and-removing-dimensions" aria-hidden="true">#</a> Dynamically Adding and Removing Dimensions</h4><p>The Dimension API supports dynamically adding and removing dimensions when the server is running.</p><p>Add a new dimension dynamically:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">DynamicRegistryManager</span> manager <span class="token operator">=</span> <span class="token class-name">MiscHelper</span><span class="token punctuation">.</span><span class="token function">getServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRegistryManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// get the dimension type</span>
<span class="token class-name">RegistryEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DimensionType</span><span class="token punctuation">&gt;</span></span> dimensionType <span class="token operator">=</span> manager<span class="token punctuation">.</span><span class="token function">getEntry</span><span class="token punctuation">(</span>
    <span class="token class-name">RegistryKey</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">Registry</span><span class="token punctuation">.</span><span class="token constant">DIMENSION_TYPE_KEY</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Identifier</span><span class="token punctuation">(</span><span class="token string">&quot;namespace:dimension_type_id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// add the dimension</span>
<span class="token class-name">DimensionAPI</span><span class="token punctuation">.</span><span class="token function">addDimensionDynamically</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">Identifier</span><span class="token punctuation">(</span><span class="token string">&quot;namespace:new_dimension_id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">DimensionOptions</span><span class="token punctuation">(</span>
        dimensionType<span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">CustomChunkGenerator</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That code will add the new dimension to the server world map and send dimension sync packets to client. You should not do this during server initialization.</p><p>When the server restarts, the dynamically added dimension will vanish. To make sure that dynamically added dimensions are still present when the server restarts, you need to save the dimension configuration:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">RegistryKey</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">World</span><span class="token punctuation">&gt;</span></span> dimId <span class="token operator">=</span> <span class="token class-name">RegistryKey</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">Registry</span><span class="token punctuation">.</span><span class="token constant">WORLD_KEY</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Identifier</span><span class="token punctuation">(</span><span class="token string">&quot;namespace:new_dimension_id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">DimensionAPI</span><span class="token punctuation">.</span><span class="token function">saveDimensionConfiguration</span><span class="token punctuation">(</span>dimId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Then it will save the configuration as a json file in the folder <code>q_dimension_configs</code> in the world saving.</p><p>Remove a dimension dynamically:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">RegistryKey</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">World</span><span class="token punctuation">&gt;</span></span> dimId <span class="token operator">=</span> <span class="token class-name">RegistryKey</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">Registry</span><span class="token punctuation">.</span><span class="token constant">WORLD_KEY</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Identifier</span><span class="token punctuation">(</span><span class="token string">&quot;namespace:new_dimension_id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">ServerWorld</span> world <span class="token operator">=</span> <span class="token class-name">MiscHelper</span><span class="token punctuation">.</span><span class="token function">getServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getWorld</span><span class="token punctuation">(</span>dimId<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">DimensionAPI</span><span class="token punctuation">.</span><span class="token function">removeDimensionDynamically</span><span class="token punctuation">(</span>world<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That code will remove the dimension from the server world map and send sync packets to client. This will not delete the world saving (blocks, entities) of that dimension. If you re-add the dimension, the blocks and entities will still be there.</p><p>If you saved that dimension&#39;s configuration, you need to delete the configuration:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">DimensionAPI</span><span class="token punctuation">.</span><span class="token function">deleteDimensionConfiguration</span><span class="token punctuation">(</span>dimId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>NOTE: currently the saved extra dimension configurations won&#39;t be updated by DFU. It means that if that dimension&#39;s chunk generator uses vanilla data formats and the format changes, the dimension will fail to load. The world data of that dimension won&#39;t be lost.</strong></p><h4 id="add-dimension-during-server-startup" tabindex="-1"><a class="header-anchor" href="#add-dimension-during-server-startup" aria-hidden="true">#</a> Add dimension during server startup:</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">DimensionAPI</span><span class="token punctuation">.</span>serverDimensionsLoadEvent<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">(</span>generatorOptions<span class="token punctuation">,</span> registryManager<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
    <span class="token class-name">Registry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DimensionOptions</span><span class="token punctuation">&gt;</span></span> registry <span class="token operator">=</span> registryManager<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">RegistryKeys</span><span class="token punctuation">.</span><span class="token constant">DIMENSION</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// get the dimension type</span>
    <span class="token class-name">RegistryEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DimensionType</span><span class="token punctuation">&gt;</span></span> dimType <span class="token operator">=</span> registryManager<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Registry</span><span class="token punctuation">.</span><span class="token constant">DIMENSION_TYPE_KEY</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getEntry</span><span class="token punctuation">(</span>
        <span class="token class-name">RegistryKey</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">Registry</span><span class="token punctuation">.</span><span class="token constant">DIMENSION_TYPE_KEY</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Identifier</span><span class="token punctuation">(</span><span class="token string">&quot;namespace:dimension_type_id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElseThrow</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;Missing dimension type&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token class-name">Identifier</span> dimId <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Identifier</span><span class="token punctuation">(</span><span class="token string">&quot;namespace:dimension_id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// get the biome registry for initializing the biome source</span>
    <span class="token class-name">Registry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Biome</span><span class="token punctuation">&gt;</span></span> biomeRegistry <span class="token operator">=</span> registryManager<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Registry</span><span class="token punctuation">.</span><span class="token constant">BIOME_KEY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BiomeSource</span> biomeSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CustomBiomeSource</span><span class="token punctuation">(</span>seed<span class="token punctuation">,</span> biomeRegistry<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token comment">// add the dimension</span>
    <span class="token class-name">DimensionAPI</span><span class="token punctuation">.</span><span class="token function">addDimension</span><span class="token punctuation">(</span>
        registry<span class="token punctuation">,</span> dimId<span class="token punctuation">,</span> dimType<span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">CustomChunkGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="dimension-api-in-1-18-2-and-1-19-2" tabindex="-1"><a class="header-anchor" href="#dimension-api-in-1-18-2-and-1-19-2" aria-hidden="true">#</a> Dimension API In 1.18.2 and 1.19.2:</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">DimensionAPI</span><span class="token punctuation">.</span>serverDimensionsLoadEvent<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">(</span>generatorOptions<span class="token punctuation">,</span> registryManager<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
    <span class="token class-name">Registry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DimensionOptions</span><span class="token punctuation">&gt;</span></span> registry <span class="token operator">=</span> generatorOptions<span class="token punctuation">.</span><span class="token function">getDimensions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// get the dimension type</span>
    <span class="token class-name">RegistryEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DimensionType</span><span class="token punctuation">&gt;</span></span> dimType <span class="token operator">=</span> registryManager<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Registry</span><span class="token punctuation">.</span><span class="token constant">DIMENSION_TYPE_KEY</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getEntry</span><span class="token punctuation">(</span>
        <span class="token class-name">RegistryKey</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">Registry</span><span class="token punctuation">.</span><span class="token constant">DIMENSION_TYPE_KEY</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Identifier</span><span class="token punctuation">(</span><span class="token string">&quot;namespace:dimension_type_id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElseThrow</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;Missing dimension type&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token class-name">Identifier</span> dimId <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Identifier</span><span class="token punctuation">(</span><span class="token string">&quot;namespace:dimension_id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// get the biome registry for initializing the biome source</span>
    <span class="token class-name">Registry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Biome</span><span class="token punctuation">&gt;</span></span> biomeRegistry <span class="token operator">=</span> registryManager<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Registry</span><span class="token punctuation">.</span><span class="token constant">BIOME_KEY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BiomeSource</span> biomeSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CustomBiomeSource</span><span class="token punctuation">(</span>seed<span class="token punctuation">,</span> biomeRegistry<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token comment">// add the dimension</span>
    <span class="token class-name">DimensionAPI</span><span class="token punctuation">.</span><span class="token function">addDimension</span><span class="token punctuation">(</span>
        registry<span class="token punctuation">,</span> dimId<span class="token punctuation">,</span> dimType<span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">CustomChunkGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// mark it non-persistent so it won&#39;t be saved into level.dat. (This is not needed in 1.19)</span>
    <span class="token class-name">DimensionAPI</span><span class="token punctuation">.</span><span class="token function">markDimensionNonPersistent</span><span class="token punctuation">(</span>dimId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="dimension-api-in-1-17-1-and-1-18-1" tabindex="-1"><a class="header-anchor" href="#dimension-api-in-1-17-1-and-1-18-1" aria-hidden="true">#</a> Dimension API In 1.17.1 and 1.18.1:</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">DimensionAPI</span><span class="token punctuation">.</span>serverDimensionsLoadEvent<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">(</span>generatorOptions<span class="token punctuation">,</span> registryManager<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
    <span class="token class-name">SimpleRegistry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DimensionOptions</span><span class="token punctuation">&gt;</span></span> registry <span class="token operator">=</span> generatorOptions<span class="token punctuation">.</span><span class="token function">getDimensions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> seed <span class="token operator">=</span> generatorOptions<span class="token punctuation">.</span><span class="token function">getSeed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// get the dimension type</span>
    <span class="token class-name">DimensionType</span> dimensionType <span class="token operator">=</span> registryManager<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Registry</span><span class="token punctuation">.</span><span class="token constant">DIMENSION_TYPE_KEY</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Identifier</span><span class="token punctuation">(</span><span class="token string">&quot;namespace:dimension_type_id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Validate</span><span class="token punctuation">.</span><span class="token function">notNull</span><span class="token punctuation">(</span>dimensionType<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// get the biome registry for initializing the biome source</span>
    <span class="token class-name">MutableRegistry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Biome</span><span class="token punctuation">&gt;</span></span> biomeRegistry <span class="token operator">=</span> registryManager<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Registry</span><span class="token punctuation">.</span><span class="token constant">BIOME_KEY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BiomeSource</span> biomeSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CustomBiomeSource</span><span class="token punctuation">(</span>seed<span class="token punctuation">,</span> biomeRegistry<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// directly register the dimension</span>
    <span class="token class-name">Identifier</span> dimensionId <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Identifier</span><span class="token punctuation">(</span><span class="token string">&quot;namespace:dimension_id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">DimensionAPI</span><span class="token punctuation">.</span><span class="token function">addDimension</span><span class="token punctuation">(</span>
        seed<span class="token punctuation">,</span> registry<span class="token punctuation">,</span> dimensionId<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> dimensionType<span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">CustomChunkGenerator</span><span class="token punctuation">(</span>seed<span class="token punctuation">,</span> biomeSource<span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// mark it non-persistent so it won&#39;t be saved into level.dat</span>
    <span class="token class-name">DimensionAPI</span><span class="token punctuation">.</span><span class="token function">markDimensionNonPersistent</span><span class="token punctuation">(</span>dimensionId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><!----><!----><!----></footer><!----><!----><!----><!--]--></main><!--]--><!----><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/immptl/assets/app.0c870a62.js" defer></script>
  </body>
</html>
